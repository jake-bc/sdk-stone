{"version":3,"sources":["../../src/store/store-request-sender.js"],"names":["StoreRequestSender","config","urlHelper","UrlHelper","create","requestSender","RequestSender","data","callback","url","getInstrumentsUrl","storeId","customerId","options","headers","sendRequest","getTrustedShippingAddressUrl","payload","method","POST","postRequest","getInstrumentByIdUrl","instrumentId","DELETE"],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;;;IAMqBA,kB;;;;AACjB;;;;+BAIcC,M,EAAQ;AAClB,gBAAMC,YAAYC,oBAAUC,MAAV,CAAiBH,MAAjB,CAAlB;AACA,gBAAMI,gBAAgBC,wBAAcF,MAAd,EAAtB;;AAEA,mBAAO,IAAIJ,kBAAJ,CAAuBE,SAAvB,EAAkCG,aAAlC,CAAP;AACH;;AAED;;;;;;;;AAKA,gCAAYH,SAAZ,EAAuBG,aAAvB,EAAsC;AAAA;;AAClC;;;;AAIA,aAAKH,SAAL,GAAiBA,SAAjB;;AAEA;;;;AAIA,aAAKG,aAAL,GAAqBA,aAArB;AACH;;AAED;;;;;;;;;wCAKgBE,I,EAAMC,Q,EAAU;AAC5B,gBAAMC,MAAM,KAAKP,SAAL,CAAeQ,iBAAf,CAAiCH,KAAKI,OAAtC,EAA+CJ,KAAKK,UAApD,CAAZ;AACA,gBAAMC,UAAU;AACZC,yBAAS,2BAAaP,IAAb;AADG,aAAhB;;AAIA,iBAAKF,aAAL,CAAmBU,WAAnB,CAA+BN,GAA/B,EAAoC,IAApC,EAA0CI,OAA1C,EAAmDL,QAAnD;AACH;;AAED;;;;;;;;mDAK2BD,I,EAAMC,Q,EAAU;AACvC,gBAAMC,MAAM,KAAKP,SAAL,CAAec,4BAAf,CAA4CT,KAAKI,OAAjD,EAA0DJ,KAAKK,UAA/D,CAAZ;AACA,gBAAMK,UAAU,iDAAmCV,IAAnC,CAAhB;AACA,gBAAMM,UAAU;AACZK,wBAAQC,iBADI;AAEZL,yBAAS,2BAAaP,IAAb;AAFG,aAAhB;;AAKA,iBAAKF,aAAL,CAAmBe,WAAnB,CAA+BX,GAA/B,EAAoCQ,OAApC,EAA6CJ,OAA7C,EAAsDL,QAAtD;AACH;;AAED;;;;;;;;8CAKsBD,I,EAAMC,Q,EAAU;AAClC,gBAAMC,MAAM,KAAKP,SAAL,CAAeQ,iBAAf,CAAiCH,KAAKI,OAAtC,EAA+CJ,KAAKK,UAApD,CAAZ;AACA,gBAAMK,UAAU,qCAAuBV,IAAvB,CAAhB;AACA,gBAAMM,UAAU;AACZC,yBAAS,2BAAaP,IAAb;AADG,aAAhB;;AAIA,iBAAKF,aAAL,CAAmBe,WAAnB,CAA+BX,GAA/B,EAAoCQ,OAApC,EAA6CJ,OAA7C,EAAsDL,QAAtD;AACH;;AAED;;;;;;;;gDAKwBD,I,EAAMC,Q,EAAU;AACpC,gBAAMC,MAAM,KAAKP,SAAL,CAAemB,oBAAf,CACRd,KAAKI,OADG,EAERJ,KAAKK,UAFG,EAGRL,KAAKe,YAHG,CAAZ;AAKA,gBAAMT,UAAU;AACZK,wBAAQK,mBADI;AAEZT,yBAAS,2BAAaP,IAAb;AAFG,aAAhB;;AAKA,iBAAKF,aAAL,CAAmBU,WAAnB,CAA+BN,GAA/B,EAAoC,IAApC,EAA0CI,OAA1C,EAAmDL,QAAnD;AACH;;;;;;kBA7FgBR,kB","file":"store-request-sender.js","sourcesContent":["import RequestSender from '../common/http-request/request-sender';\nimport { DELETE, POST } from '../common/http-request/method-types';\nimport UrlHelper from './url-helper';\nimport {\n    mapToHeaders,\n    mapToInstrumentPayload,\n    mapToTrustedShippingAddressPayload,\n} from './v2/mappers';\n\nexport default class StoreRequestSender {\n    /**\n     * @param {Object} config\n     * @returns {StoreRequestSender}\n     */\n    static create(config) {\n        const urlHelper = UrlHelper.create(config);\n        const requestSender = RequestSender.create();\n\n        return new StoreRequestSender(urlHelper, requestSender);\n    }\n\n    /**\n     * @param {UrlHelper} urlHelper\n     * @param {RequestSender} requestSender\n     * @returns {void}\n     */\n    constructor(urlHelper, requestSender) {\n        /**\n         * @private\n         * @type {UrlHelper}\n         */\n        this.urlHelper = urlHelper;\n\n        /**\n         * @private\n         * @type {RequestSender}\n         */\n        this.requestSender = requestSender;\n    }\n\n    /**\n     * @param {Object} data\n     * @param {Function} [callback]\n     * @return {void}\n     */\n    loadInstruments(data, callback) {\n        const url = this.urlHelper.getInstrumentsUrl(data.storeId, data.customerId);\n        const options = {\n            headers: mapToHeaders(data),\n        };\n\n        this.requestSender.sendRequest(url, null, options, callback);\n    }\n\n    /**\n     * @param {Object} data\n     * @param {Function} [callback]\n     * @return {void}\n     */\n    loadInstrumentsWithAddress(data, callback) {\n        const url = this.urlHelper.getTrustedShippingAddressUrl(data.storeId, data.customerId);\n        const payload = mapToTrustedShippingAddressPayload(data);\n        const options = {\n            method: POST,\n            headers: mapToHeaders(data),\n        };\n\n        this.requestSender.postRequest(url, payload, options, callback);\n    }\n\n    /**\n     * @param {Object} data\n     * @param {Function} [callback]\n     * @return {void}\n     */\n    postShopperInstrument(data, callback) {\n        const url = this.urlHelper.getInstrumentsUrl(data.storeId, data.customerId);\n        const payload = mapToInstrumentPayload(data);\n        const options = {\n            headers: mapToHeaders(data),\n        };\n\n        this.requestSender.postRequest(url, payload, options, callback);\n    }\n\n    /**\n     * @param {Object} data\n     * @param {Function} [callback]\n     * @return {void}\n     */\n    deleteShopperInstrument(data, callback) {\n        const url = this.urlHelper.getInstrumentByIdUrl(\n            data.storeId,\n            data.customerId,\n            data.instrumentId\n        );\n        const options = {\n            method: DELETE,\n            headers: mapToHeaders(data),\n        };\n\n        this.requestSender.sendRequest(url, null, options, callback);\n    }\n}\n"]}